(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports!=="undefined"){module.exports=e(require("jquery"))}else{e(jQuery)}})(function(e){var t=e(window);e.fn.lazyload=function(i){var n=this;var o;var r={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:true,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function f(){var t=0;n.each(function(){var i=e(this);if(r.skip_invisible&&!i.is(":visible")){return}if(e.abovethetop(this,r)||e.leftofbegin(this,r)){}else if(!e.belowthefold(this,r)&&!e.rightoffold(this,r)){i.trigger("appear");t=0}else{if(++t>r.failure_limit){return false}}})}if(i){if(undefined!==i.failurelimit){i.failure_limit=i.failurelimit;delete i.failurelimit}if(undefined!==i.effectspeed){i.effect_speed=i.effectspeed;delete i.effectspeed}e.extend(r,i)}o=r.container===undefined||r.container===window?t:e(r.container);if(0===r.event.indexOf("scroll")){o.bind(r.event,function(){return f()})}this.each(function(){var t=this;var i=e(t);t.loaded=false;if(i.attr("src")===undefined||i.attr("src")===false){if(i.is("img")){i.attr("src",r.placeholder)}}i.one("appear",function(){if(!this.loaded){if(r.appear){var o=n.length;r.appear.call(t,o,r)}e("<img />").bind("load",function(){var o=i.attr("data-"+r.data_attribute);i.hide();if(i.is("img")){i.attr("src",o)}else{i.css("background-image","url('"+o+"')")}i[r.effect](r.effect_speed);t.loaded=true;var f=e.grep(n,function(e){return!e.loaded});n=e(f);if(r.load){var l=n.length;r.load.call(t,l,r)}}).attr("src",i.attr("data-"+r.data_attribute))}});if(0!==r.event.indexOf("scroll")){i.bind(r.event,function(){if(!t.loaded){i.trigger("appear")}})}});t.bind("resize",function(){f()});if(/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)){t.bind("pageshow",function(t){if(t.originalEvent&&t.originalEvent.persisted){n.each(function(){e(this).trigger("appear")})}})}e(document).ready(function(){f()});return this};e.belowthefold=function(i,n){var o;if(n.container===undefined||n.container===window){o=(window.innerHeight?window.innerHeight:t.height())+t.scrollTop()}else{o=e(n.container).offset().top+e(n.container).height()}return o<=e(i).offset().top-n.threshold};e.rightoffold=function(i,n){var o;if(n.container===undefined||n.container===window){o=t.width()+t.scrollLeft()}else{o=e(n.container).offset().left+e(n.container).width()}return o<=e(i).offset().left-n.threshold};e.abovethetop=function(i,n){var o;if(n.container===undefined||n.container===window){o=t.scrollTop()}else{o=e(n.container).offset().top}return o>=e(i).offset().top+n.threshold+e(i).height()};e.leftofbegin=function(i,n){var o;if(n.container===undefined||n.container===window){o=t.scrollLeft()}else{o=e(n.container).offset().left}return o>=e(i).offset().left+n.threshold+e(i).width()};e.inviewport=function(t,i){return!e.rightoffold(t,i)&&!e.leftofbegin(t,i)&&!e.belowthefold(t,i)&&!e.abovethetop(t,i)};e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})});